(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0b1f":function(t,e,n){"use strict";var s=n("e481"),a=n.n(s);a.a},1001:function(t,e,n){},"23d9":function(t,e,n){},"3a2d":function(t,e,n){},"3b23":function(t,e,n){},"4f3d":function(t,e,n){"use strict";var s=n("dcd9"),a=n.n(s);a.a},5054:function(t,e,n){"use strict";var s=n("3a2d"),a=n.n(s);a.a},5523:function(t,e,n){"use strict";var s=n("1001"),a=n.n(s);a.a},"55ac":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s,a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},o=[],r={},c=r,l=n("2877"),u=Object(l["a"])(c,i,o,!1,null,"2e4108f2",null),d=u.exports,p=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("div",{attrs:{id:"lp-content"}},[n("navs"),n("div",{staticClass:"lp-content-mid"},[n("Ipt",{on:{tologin:t.toSign,getNews:t.getNews}}),n("div",{staticClass:"lp-content-mid-refresh",on:{click:t.getNews}},[t._v(" 点击刷新 ")]),n("news")],1),n("div",{staticClass:"lp-content-right"},[t._m(1),n("div",{staticClass:"lp-logInfo"},[t.isLogin?n("div",{staticClass:"lp-logInfo-login"},[n("div",{staticClass:"lp-logInfo-login-logout"},[n("span",{on:{click:t.logout}},[t._v("退出登录")])]),n("div",{staticClass:"lp-logInfo-login-avator"},[n("img",{attrs:{src:t.avator},on:{click:t.toUserCenter}})]),n("div",{staticClass:"lp-logInfo-login-nickname"},[t._v(t._s(t.nickname))]),n("div",{staticClass:"lp-logInfo-login-count"},[n("div",[n("span",{staticClass:"count"},[t._v(t._s(t.tt_count))]),n("span",{staticClass:"title"},[t._v("头条数")])]),n("div",[n("span",{staticClass:"count"},[t._v(t._s(t.article_count))]),n("span",{staticClass:"title"},[t._v("文章数")])])])]):n("div",{staticClass:"lp-logInfo-logout"},[n("div",[t._v(" 登录后可以保存您的浏览喜好、评论、收藏，并与APP同步，更可以发布微头条 ")]),n("div",{on:{click:t.toSign}},[t._v(" 登录 ")])])])])],1)])},m=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-navTop"},[n("div",{staticClass:"lp-navTop-left"},[n("div",{staticClass:"lp-navTop-left-download"},[t._v("下载App")]),n("div",{staticClass:"lp-navTop-left-reg"},[t._v("注册头条号")])]),n("div",[t._v("侵权投诉")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-content-right-search"},[n("input",{attrs:{type:"text"}}),n("div",[t._v("搜索")])])}],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-toutiao-nav"},[n("h4",[t._v("泽林头条")]),t._l(t.lists,(function(e,s){return n("li",{key:s,class:{active:s===t.active},on:{click:function(e){return t.cliNav(e,s)}}},[t._v(" "+t._s(e)+" ")])}))],2)},g=[],h={components:{},data:function(){return{lists:["推荐","西瓜视频","财经","热点","直播","图片","科技","娱乐","游戏","体育","懂车帝","热点"],active:0}},computed:{},watch:{},methods:{cliNav:function(t,e){this.active=e}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},_=h,w=(n("4f3d"),Object(l["a"])(_,v,g,!1,null,"d2961e28",null)),b=w.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-content-mid-input"},[n("div",{staticClass:"lp-content-mid-input-tab"},[n("div",{class:{active:"tt"===t.active},on:{click:function(){t.active="tt"}}},[t._v("发微头条")]),n("div",{class:{active:"arcticle"===t.active},on:{click:function(){t.active="arcticle"}}},[t._v("写文章")])]),"tt"===t.active?n("div",{staticClass:"lp-content-mid-input-tt"},[n("div",{staticClass:"lp-content-mid-input-tt-text"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{autocomplete:"off",placeholder:"有啥新鲜事呀",maxlength:"2000"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),n("div",{staticClass:"lp-content-mid-input-tt-num"},[t._v(t._s(t.text.length)+"/2000")])]),n("div",{staticClass:"lp-content-mid-input-tt-fun"},[n("span",{on:{click:function(){t.disImg=!t.disImg}}},[t._v("图片")]),n("span",{on:{click:t.releaseTT}},[t._v("发布")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.disImg,expression:"disImg"}],staticClass:"lp-content-mid-input-tt-fun-img"},[n("div",[n("input",{attrs:{type:"file",multiple:"",accept:".jpg,.png",max:""},on:{change:t.uploadimg}}),t._v(" + ")]),t._l(t.imglists,(function(e,s){return n("div",[n("img",{attrs:{src:e}}),n("div",{staticClass:"lp-del-img",on:{click:function(e){return t.delimg(e,s)}}},[t._v(" - ")])])}))],2)])]):n("div",{staticClass:"lp-content-mid-input-arcticle"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.arcTitle,expression:"arcTitle"}],attrs:{type:"text",maxlength:"30"},domProps:{value:t.arcTitle},on:{input:function(e){e.target.composing||(t.arcTitle=e.target.value)}}}),n("vue-editor",{staticClass:"rich-editor",attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}}),n("div",{staticClass:"lp-release"},[n("div",{on:{click:t.releaseArcitle}},[t._v("发布")])])],1)])},$=[],y=(n("4160"),n("a630"),n("a15b"),n("a434"),n("3ca3"),n("159b"),n("5873")),k={components:{VueEditor:y["a"]},data:function(){return{active:"tt",text:"",imglists:[],disImg:!1,editor:"",article_first_img:"",arcTitle:""}},computed:{},watch:{},methods:{uploadimg:function(t){var e=this;Array.from(t.target.files).forEach((function(t){var n=new FormData;n.append("file",t),e.$axios.post("/aliossUpload",n).then((function(t){e.imglists.push(t.data.url)}),(function(t){console.log(t)}))}))},delimg:function(t,e){this.imglists.splice(e,1)},releaseTT:function(){var t=this;if(this.$store.state.islogin){console.log("已经登录了"),console.log(this.$store.state);var e=new FormData;e.append("content",this.text),e.append("oauth_token",this.$store.state.oauth_token),e.append("imgs",this.imglists.join(",")),this.$axios.post("/createTT",e).then((function(e){console.log(e.data),t.text="",t.imglists=[],t.disImg=!1,t.$emit("getNews"),t.$store.commit("changeNum",{type:"add",atr:"tt_count"})}))}else this.$emit("tologin")},releaseArcitle:function(){var t=this;if(this.$store.state.islogin){console.log(this.arcTitle),console.log(this.editor),console.log(this.article_first_img);var e=new FormData;e.append("title",this.arcTitle),e.append("content",this.editor),e.append("img",this.article_first_img),e.append("oauth_token",this.$store.state.oauth_token),this.$axios.post("/createArticle",e).then((function(e){console.log(e.data),t.arcTitle="",t.editor="",t.article_first_img="",t.$store.commit("changeNum",{type:"add",atr:"article_count"})}))}else this.$emit("tologin")},handleImageAdded:function(t,e,n,s){var a=this;console.log("图片添加");var i=new FormData;i.append("file",t),this.$axios.post("/aliossUpload",i).then((function(t){var i=t.data.url;e.insertEmbed(n,"image",i),console.log("文章上传图片"),console.log(a.article_first_img),console.log(i),""==a.article_first_img&&(a.article_first_img=i),s()})).catch((function(t){console.log(t)}))}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},x=k,I=(n("5523"),Object(l["a"])(x,C,$,!1,null,"e1f2ac9a",null)),D=I.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-content-mid-news"},t._l(t.news,(function(e){return n("div",{on:{click:function(n){return t.toNewsDetail(n,e)}}},[e.img?n("div",{staticClass:"lp-content-mid-news-Img"},[n("img",{attrs:{src:e.img}}),n("div",[n("span",[t._v(t._s(e.title))]),n("div",[n("img",{attrs:{src:e.user.avator}}),n("span",[t._v(t._s(e.user.nickname))]),n("span",[t._v(t._s(e.created_at))])])])]):n("div",{staticClass:"lp-content-mid-news-noImg"},[n("span",[t._v(t._s(e.title))]),n("div",[n("img",{attrs:{src:e.user.avator}}),n("span",[t._v(t._s(e.user.nickname))]),n("span",[t._v(t._s(e.created_at))])])])])})),0)},O=[],T={components:{},data:function(){return{}},computed:{news:{get:function(){return this.$store.state.news},set:function(){}}},watch:{},methods:{toNewsDetail:function(t,e){this.$router.push({name:"newsListDetail",query:{nid:e.nid},params:{nid:e.nid}})}},filters:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},P=T,j=(n("668b"),Object(l["a"])(P,N,O,!1,null,"6c7b1b66",null)),S=j.exports,A={name:"App",components:{navs:b,Ipt:D,News:S},computed:{isLogin:{get:function(){return this.$store.state.islogin},set:function(){}},avator:{get:function(){return this.$store.state.avator},set:function(){}},nickname:{get:function(){return this.$store.state.nickname},set:function(){}},tt_count:{get:function(){return this.$store.state.tt_count},set:function(){}},article_count:{get:function(){return this.$store.state.article_count},set:function(){}}},methods:{toSign:function(){this.$router.push({name:"login",params:{type:"login",typetitle:"账密登录"}})},logout:function(){var t=JSON.parse(localStorage.getItem("userInfo"));this.$store.commit("changIsLogin",!1),this.$store.commit("delAtr",t),localStorage.setItem("userInfo",""),console.log(this.$store.state)},getNews:function(){var t=this,e=new FormData;console.log(this),e.append("lastid",this.$store.getters.lastId),this.$axios.post("/getArticles",e).then((function(e){t.$store.commit("changeNews",{news:e.data.articles}),console.log("访问文章接口")}))},toUserCenter:function(){this.$router.push({name:"UserCenter"})}},created:function(){var t=this,e=new FormData;e.append("lastid",0),this.$axios.post("/getArticles",e).then((function(e){t.$store.commit("addAtr",{news:e.data.articles}),console.log("访问文章接口")}))}},L=A,U=(n("e012"),Object(l["a"])(L,f,m,!1,null,"51aa5e7e",null)),E=U.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-login"},[n("img",{staticClass:"lp-login-text",attrs:{src:"//s3a.pstatp.com/toutiao/resource/ntoutiao_web/static/image/login/slogan_c6bab2f.png"}}),n("img",{staticClass:"lp-login-title",attrs:{src:"//s3.pstatp.com/toutiao/resource/ntoutiao_web/static/image/logo_271e845.png"}}),n("div",{staticClass:"lp-login-content"},[n("div",{staticClass:"lp-login-content-title"},[t._v(t._s(t.typetitle))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"账号/邮箱"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("div",{staticClass:"lp-login-content-login",on:{click:t.confirm}},[t._v("确定")])]),n("div",{staticClass:"lp-login-clause"},[t._m(0),"sign"===t.type?n("div",{staticClass:"lp-login-clause-login",on:{click:t.tologin}},[t._v("登录")]):t._e(),"login"===t.type?n("div",{staticClass:"lp-login-clause-sign",on:{click:t.toSignq}},[t._v("注册用户")]):t._e()]),n("div",{class:["lp-login-tips",{"lp-login-tips-dis":!0===t.disMsg}]},[t._v(" "+t._s(t.msg)+" ")])])},F=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("注册/登录即表示你同意 "),n("a",{attrs:{href:"https://www.toutiao.com/user_agreement/",target:"_blank"}},[t._v("用户协议")]),t._v(" 和 "),n("a",{attrs:{href:"https://www.toutiao.com/privacy_protection/",target:"_blank"}},[t._v("隐私条款")])])}],J={components:{},data:function(){return{username:"",password:"",msg:"",disMsg:!1}},props:["type","typetitle"],computed:{},watch:{},methods:{toSignq:function(){this.$router.push({name:"sign",params:{type:"sign",typetitle:"账密注册"}})},tologin:function(){this.$router.push({name:"login",params:{type:"login",typetitle:"账密登录"}})},confirm:function(){var t=this;"login"===this.type?(console.log("登录行为"),this.$axios.post("/loginCheck",{username:this.username,password:this.password}).then((function(e){if(t.msg=e.data.msg,!e.data.status){var n=e.data.wdata;t.$store.commit("addAtr",n),n=JSON.stringify(n),localStorage.setItem("userInfo",n),t.$store.commit("changIsLogin",!0),t.$router.push("/index")}}))):"sign"===this.type&&(console.log("注册行为"),this.$axios.post("/createUser",{username:this.username,password:this.password}).then((function(e){console.log(e.data),t.msg=e.data.msg,e.data.status||t.$axios.post("/loginCheck",{username:t.username,password:t.password}).then((function(e){if(!e.data.status){var n=e.data.wdata;t.$store.commit("addAtr",n),n=JSON.stringify(n),localStorage.setItem("userInfo",n),t.$store.commit("changIsLogin",!0),t.$router.push("/index")}}))}))),this.disMsg=!0,setTimeout((function(){t.disMsg=!1}),1e3)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},q=J,B=(n("5988"),Object(l["a"])(q,M,F,!1,null,"380e004a",null)),H=B.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-newsListDetail"},[t._m(0),n("div",{staticClass:"lp-newsListDetail-content"},[n("div",{staticClass:"lp-newsListDetail-content-mid"},[n("div",{staticClass:"lp-newsListDetail-content-mid-title"},[t._v(" "+t._s(t.title)+" ")]),n("div",{staticClass:"lp-newsListDetail-content-mid-user"},[n("span",[t._v(t._s(t.nickname))]),n("span",[t._v(t._s(t.user))])]),n("div",{staticClass:"lp-newsListDetail-content-mid-content"},["TT"===t.type?n("p",t._l(t.imgs,(function(t){return n("img",{attrs:{src:t}})})),0):t._e(),n("p",{domProps:{innerHTML:t._s(t.content)}})])]),n("div",{staticClass:"lp-newsListDetail-content-left"},[n("ul",t._l(t.forward,(function(e){return n("li",[n("img",{attrs:{src:e.url}}),n("span",[t._v(t._s(e.text))])])})),0)]),n("div",{staticClass:"lp-newsListDetail-content-right"},[n("div",[n("img",{attrs:{src:t.avator}}),n("span",[t._v(t._s(t.nickname))])])])])])},z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-newsListDetail-nav"},[n("div",{staticClass:"lp-newsListDetail-nav-content"},[n("div",{staticClass:"lp-newsListDetail-nav-img"},[n("img",{attrs:{src:"//s3.pstatp.com/toutiao/static/img/logo.271e845.png"}})]),n("div",{staticClass:"lp-newsListDetail-nav-input"},[n("input",{attrs:{type:"text",placeholder:"搜索你感兴趣的内容吧"}}),n("div",[t._v("搜索")])])])])}],Q=n("ade3"),V={components:{},data:function(){var t;return t={newsInfo:"",type:"",forward:[{text:"转发",url:"//s3.pstatp.com/toutiao/static/img/repost.021bf16.png"},{text:"微博",url:"//s3.pstatp.com/toutiao/static/img/repost.021bf16.png"},{text:"Qzone",url:"//s3.pstatp.com/toutiao/static/img/repost.021bf16.png"},{text:"微信",url:"//s3.pstatp.com/toutiao/static/img/repost.021bf16.png"}],content:"",title:"",user:"",nickname:"",avator:""},Object(Q["a"])(t,"type",""),Object(Q["a"])(t,"imgs",[]),t},props:["nid"],computed:{},watch:{},methods:{},beforeRouteEnter:function(t,e,n){n()},created:function(){var t=this;this.$axios.post("/getArticleById",{nid:this.nid}).then((function(e){console.log(e.data.article);var n=e.data.article;t.newsInfo=n,t.user=n.created_at,t.title=n.title,t.avator=n.n_user.avator,t.content=n.content,t.nickname=n.n_user.nickname,t.type=n.type,t.imgs=n.imgs}))},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},G=V,K=(n("0b1f"),Object(l["a"])(G,R,z,!1,null,null,null)),W=K.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-usercenter"},[n("div",{staticClass:"lp-usercenter-nav"},[n("div",[n("img",{attrs:{src:"//s3.pstatp.com/toutiao/resource/ntoutiao_web/static/image/logo_271e845.png"},on:{click:t.toIndex}})])]),n("div",{staticClass:"lp-usercenter-content"},[t._m(0),n("div",{staticClass:"lp-usercenter-content-info"},[n("img",{attrs:{src:"//sf1-ttcdn-tos.pstatp.com/img/pgc-image/f6cc8e95467f44e3bcdcf9d4ca0a58f6~120x256.image"}}),n("span",[t._v("name")]),n("span",{staticClass:"lp-usercenter-content-info-edit",on:{click:t.toUserData}},[t._v("edit")])]),n("div",{staticClass:"lp-usercenter-content-lists"},[n("div",{staticClass:"lp-usercenter-content-lists-nav"},[n("div",{staticClass:"lp-usercenter-tab"},[n("span",{class:{active:"Articles"===t.active},on:{click:function(e){return t.switchTab(e,"Articles")}}},[t._v("文章")]),n("span",{class:{active:"TTLists"===t.active},on:{click:function(e){return t.switchTab(e,"TTLists")}}},[t._v("微头条")])]),n("keep-alive",[n(t.active,{tag:"component",attrs:{arrData:t.arrData},on:{delNews:t.delNews}})],1)],1),n("div",{staticClass:"lp-usercenter-content-lists-num"},[n("div",[n("span",[t._v(t._s(t.articles.length))]),n("span",[t._v("文章数")])]),n("div",[n("span",[t._v(t._s(t.ttlists.length))]),n("span",[t._v("头条数")])])])])])])},Y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-usercenter-content-bg"},[n("img",{attrs:{src:"//s3.pstatp.com/site/tt_mfsroot/pc_img/bg_profile.png"}})])}],Z=(n("c740"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-content-mid-news"},t._l(t.arrData,(function(e){return n("div",{on:{click:function(n){return t.toNewsDetail(n,e)}}},[e.img?n("div",{staticClass:"lp-content-mid-news-Img"},[n("img",{attrs:{src:e.img}}),n("div",[n("span",[t._v(t._s(e.title))]),n("div",[n("img",{attrs:{src:t.$store.state.avator}}),n("span",[t._v(t._s(t.$store.state.nickname))]),n("span",[t._v(t._s(e.created_at))])])])]):n("div",{staticClass:"lp-content-mid-news-noImg"},[n("span",[t._v(t._s(e.title))]),n("div",[n("img",{attrs:{src:t.$store.state.avator}}),n("span",[t._v(t._s(t.$store.state.nickname))]),n("span",[t._v(t._s(e.created_at))])])]),n("div",{staticClass:"lp-content-mid-news-del",on:{click:function(n){return n.stopPropagation(),t.delNew(n,e.nid)}}},[t._v(" 删除 ")])])})),0)}),tt=[],et={components:{},data:function(){return{}},computed:{},props:["arrData"],watch:{},methods:{toNewsDetail:function(t,e){this.$router.push({name:"newsListDetail",query:{nid:e.nid},params:{nid:e.nid}})},delNew:function(t,e){this.$emit("delNews",e)}},filters:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},nt=et,st=(n("a87f"),Object(l["a"])(nt,Z,tt,!1,null,"8b765c9e",null)),at=st.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-content-mid-news"},t._l(t.arrData,(function(e){return n("div",{on:{click:function(n){return t.toNewsDetail(n,e)}}},[e.img?n("div",{staticClass:"lp-content-mid-news-Img"},[n("img",{attrs:{src:e.img}}),n("div",[n("span",[t._v(t._s(e.title))]),n("div",[n("img",{attrs:{src:t.$store.state.avator}}),n("span",[t._v(t._s(t.$store.state.nickname))]),n("span",[t._v(t._s(e.created_at))])])])]):n("div",{staticClass:"lp-content-mid-news-noImg"},[n("span",[t._v(t._s(e.title))]),n("div",[n("img",{attrs:{src:t.$store.state.avator}}),n("span",[t._v(t._s(t.$store.state.nickname))]),n("span",[t._v(t._s(e.created_at))])])]),n("div",{staticClass:"lp-content-mid-news-del",on:{click:function(n){return n.stopPropagation(),t.delNew(n,e.nid)}}},[t._v(" 删除 ")])])})),0)},ot=[],rt={components:{},data:function(){return{}},computed:{},props:["arrData"],watch:{},methods:{toNewsDetail:function(t,e){this.$router.push({name:"newsListDetail",query:{nid:e.nid},params:{nid:e.nid}})},delNew:function(t,e){this.$emit("delNews",e)}},filters:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},ct=rt,lt=(n("5054"),Object(l["a"])(ct,it,ot,!1,null,"68a015a2",null)),ut=lt.exports,dt=(s={components:{},data:function(){return{ttlists:[],articles:[],active:"Articles"}},computed:{arrData:{get:function(){return"Articles"===this.active?this.articles:this.ttlists},set:function(){}}},watch:{},methods:{switchTab:function(t,e){this.active=e},delNews:function(t){var e=this;console.log("父组件拿到了nid:",t);var n=this.$store.state.oauth_token,s=new FormData;s.append("oauth_token",n),s.append("nid",t),this.$axios.post("/deleteArticle",s).then((function(n){if(0==n.data.status){var s=e.articles.findIndex((function(e){return e.nid==t}));if(-1!=s)return e.articles.splice(s,1),e.$store.commit("changeNum",{type:"del",atr:"article_count"}),!0;if(s=e.ttlists.findIndex((function(e){return e.nid==t})),-1!=s)return e.ttlists.splice(s,1),e.$store.commit("changeNum",{type:"del",atr:"tt_count"}),console.log(e.$store.state),!0}}))},toIndex:function(){this.$router.push("/index")},toUserData:function(){this.$router.push({name:"UserData"})}}},Object(Q["a"])(s,"components",{Articles:at,TTLists:ut}),Object(Q["a"])(s,"created",(function(){var t=this,e=this.$store.state.oauth_token,n=new FormData,s=new FormData;n.append("oauth_token",e),s.append("oauth_token",e),n.append("type","TT"),s.append("type","Article"),this.$axios.post("/getArticlesByType",n).then((function(e){t.ttlists=e.data.articles})),this.$axios.post("/getArticlesByType",s).then((function(e){t.articles=e.data.articles}))})),Object(Q["a"])(s,"mounted",(function(){})),Object(Q["a"])(s,"beforeCreate",(function(){})),Object(Q["a"])(s,"beforeMount",(function(){})),Object(Q["a"])(s,"beforeUpdate",(function(){})),Object(Q["a"])(s,"updated",(function(){})),Object(Q["a"])(s,"beforeDestroy",(function(){})),Object(Q["a"])(s,"destroyed",(function(){})),Object(Q["a"])(s,"activated",(function(){})),s),pt=dt,ft=(n("c53e"),Object(l["a"])(pt,X,Y,!1,null,null,null)),mt=ft.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lp-userdata"},[n("div",{staticClass:"lp-usercenter-nav"},[n("div",[n("img",{attrs:{src:"//s3.pstatp.com/toutiao/resource/ntoutiao_web/static/image/logo_271e845.png"},on:{click:t.toIndex}})])]),n("div",{staticClass:"lp-userdata-content"},[n("div",{staticClass:"lp-usercenter-tab"},[n("span",{class:{active:"userInfo"===t.active},on:{click:function(e){return t.switchTab(e,"userInfo")}}},[t._v("账户信息")]),n("span",{class:{active:"acount"===t.active},on:{click:function(e){return t.switchTab(e,"acount")}}},[t._v("密码管理")])]),"userInfo"===t.active?n("div",{staticClass:"lp-userdata-content-userInfo"},[n("div",[n("span",[t._v("名称")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],attrs:{type:"text"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),n("div",[n("span",[t._v("头像")]),n("input",{staticClass:"lp-userdata-content-userInfo-file",attrs:{type:"file",accept:".jpg,.png"},on:{change:t.upLoadImg}}),n("img",{attrs:{src:t.avator}})]),n("div",[n("span"),n("div",{staticClass:"lp-userdata-content-userInfo-upload",on:{click:t.upload}},[t._v(" 更新资料 ")])])]):"acount"===t.active?n("div",{staticClass:"lp-userdata-content-acount"},[n("div",[n("span",[t._v("当前密码")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.oldPassword,expression:"oldPassword"}],attrs:{type:"password"},domProps:{value:t.oldPassword},on:{input:function(e){e.target.composing||(t.oldPassword=e.target.value)}}})]),n("div",[n("span",[t._v("新密码")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],attrs:{type:"password"},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}})]),n("div",[n("span"),n("div",{staticClass:"lp-userdata-content-userInfo-upload",on:{click:t.uploadPassword}},[t._v("更新资料")])])]):t._e()])])},gt=[],ht={components:{},data:function(){return{active:"userInfo",nickname:"",avator:"",newPassword:"",oldPassword:""}},computed:{},watch:{},methods:{toIndex:function(){this.$router.push("/index")},switchTab:function(t,e){this.active=e},upLoadImg:function(t){var e=this,n=t.target.files;n.forEach((function(t){var n=new FormData;n.append("file",t),e.$axios.post("/aliossUpload",n).then((function(t){e.avator=t.data.url}))}))},upload:function(){var t=this,e=this.$store.state.oauth_token,n=new FormData;n.append("oauth_token",e),n.append("nickname",this.nickname),n.append("avator",this.avator),this.$axios.post("/updateUserInfo",n).then((function(e){console.log(e),t.$store.commit("addAtr",{nickname:t.nickname,avator:t.avator});var n=localStorage.getItem("userInfo");n=JSON.parse(n),n.nickname=t.nickname,n.avator=t.avator,n=JSON.stringify(n),localStorage.setItem("userInfo",n),console.log(t.$store.state)}))},uploadPassword:function(){var t=this.$store.state.oauth_token,e=new FormData;e.append("currentPassword",this.oldPassword),e.append("updatePassword",this.newPassword),e.append("oauth_token",t),this.$axios.post("/updatePassword",{currentPassword:this.oldPassword,updatePassword:this.newPassword,oauth_token:t}).then((function(t){console.log(t.data)}))}},created:function(){this.nickname=this.$store.state.nickname,this.avator=this.$store.state.avator},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},_t=ht,wt=(n("e9ba"),Object(l["a"])(_t,vt,gt,!1,null,"0f6a0c4c",null)),bt=wt.exports;a["a"].use(p["a"]);var Ct=new p["a"]({mode:"history",routes:[{path:"/index",component:E},{path:"/",redirect:"/index"},{path:"/login",component:H,name:"login",props:!0},{path:"/sign",component:H,name:"sign",props:!0},{path:"/newsListDetail",component:W,name:"newsListDetail",props:!0},{path:"/userCenter",component:mt,name:"UserCenter",props:!0},{path:"/userData",component:bt,name:"UserData",props:!0}]}),$t=(n("99af"),n("4fad"),n("b64b"),n("3835")),yt=n("2f62");a["a"].use(yt["a"]);var kt=new yt["a"].Store({state:{news:[]},mutations:{addAtr:function(t,e){for(var n=0,s=Object.entries(e);n<s.length;n++){var i=Object($t["a"])(s[n],2),o=i[0],r=i[1];a["a"].set(t,o,r)}},changIsLogin:function(t,e){console.log(e),t.islogin=e},delAtr:function(t,e){for(var n=0,s=Object.keys(e);n<s.length;n++){var i=s[n];a["a"].delete(t,i)}},changeNews:function(t,e){console.log(e),t.news=e.news.concat(t.news)},changeNum:function(t,e){if("add"===e.type){var n=+t[e.atr]+1;t[e.atr]=n;var s=localStorage.getItem("userInfo");s=JSON.parse(s),s[e.atr]=n,s=JSON.stringify(s),localStorage.setItem("userInfo",s)}else if("del"===e.type){var a=+t[e.atr]-1;t[e.atr]=a;var i=localStorage.getItem("userInfo");i=JSON.parse(i),i[e.atr]=a,i=JSON.stringify(i),localStorage.setItem("userInfo",i)}}},actions:{},getters:{lastId:function(t,e){if(console.log(e),0===t.news.length)return 0;var n=t.news[0].nid;return console.log(n),n}}}),xt=n("bc3a"),It=n.n(xt),Dt=It.a.create({baseURL:"http://tt.linweiqin.com/api/tt",timeout:6e3});a["a"].prototype.$axios=Dt,a["a"].config.productionTip=!1;new a["a"]({render:function(t){return t(d)},router:Ct,store:kt,created:function(){var t=localStorage.getItem("userInfo");t?(t=JSON.parse(t),this.$store.commit("addAtr",{islogin:!0}),this.$store.commit("addAtr",t)):this.$store.commit("addAtr",{islogin:!1})}}).$mount("#app")},5988:function(t,e,n){"use strict";var s=n("3b23"),a=n.n(s);a.a},"668b":function(t,e,n){"use strict";var s=n("55ac"),a=n.n(s);a.a},"7ea6":function(t,e,n){},a5f6:function(t,e,n){},a87f:function(t,e,n){"use strict";var s=n("a5f6"),a=n.n(s);a.a},c53e:function(t,e,n){"use strict";var s=n("23d9"),a=n.n(s);a.a},dcd9:function(t,e,n){},e012:function(t,e,n){"use strict";var s=n("e5fb"),a=n.n(s);a.a},e481:function(t,e,n){},e5fb:function(t,e,n){},e9ba:function(t,e,n){"use strict";var s=n("7ea6"),a=n.n(s);a.a}});
//# sourceMappingURL=app.d73badb4.js.map